<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BORDER OBS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html,body {
    margin: 0;
    padding: 0;
    background: transparent;
    overflow: hidden;
  }

  #border {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 20px;
    pointer-events: none;
    background-size: 400% 400%;
    box-shadow: 0 0 var(--g, 8px) var(--colorGlow, #fff);
  }
</style>
</head>
<body>

<div id="border"></div>

<script>
/* =============================
   OBS MODE — HASH LOADER
============================= */

const border = document.getElementById("border");

function parseHash() {
  const params = {};
  window.location.hash.replace("#", "").split("&").forEach(p => {
    if (!p.includes("=")) return;
    const [k, v] = p.split("=");
    params[k] = decodeURIComponent(v);
  });
  return params;
}

const cfg = parseHash();

/* Valores */
const colors = [
  cfg.c1, cfg.c2, cfg.c3, cfg.c4, cfg.c5, cfg.c6
];

const speed = Number(cfg.speed ?? 10);
const direction = cfg.dir ?? "90deg";
const glow = Number(cfg.glow ?? 8);
const height = Number(cfg.h ?? 22);
const type = cfg.type ?? "bar";

/* aplicar variáveis */
document.documentElement.style.setProperty("--g", glow + "px");
document.documentElement.style.setProperty("--colorGlow", colors[3]);

/* aplicar altura */
border.style.height = height + 10 + "px";

/* tipo */
if (type === "top") {
  border.style.top = "0";
  border.style.width = "100vw";
}
if (type === "bottom") {
  border.style.bottom = "0";
  border.style.top = "";
  border.style.width = "100vw";
}
if (type === "left") {
  border.style.left = "0";
  border.style.top = "0";
  border.style.width = height + "px";
  border.style.height = "100vh";
}
if (type === "right") {
  border.style.right = "0";
  border.style.left = "";
  border.style.top = "0";
  border.style.width = height + "px";
  border.style.height = "100vh";
}
if (type === "fullframe") {
  border.style.width = "100vw";
  border.style.height = "100vh";
}

/* gradiente estático */
border.style.background = `linear-gradient(${direction}, ${colors.join(",")})`;

/* CORREÇÃO IMPORTANTE:
   Colocar background-position inicial */
border.style.backgroundPosition = "0% 50%";

/* =============================
   AGBC ANIMATION — FUNCIONANDO
============================= */

let offset = 0;

function animate() {
  offset += speed * 0.0008;
  if (offset > 1) offset = 0;

  /* CORREÇÃO #1 — AQUI ESTAVA O BUG:
     OBS precisa de "%” e
